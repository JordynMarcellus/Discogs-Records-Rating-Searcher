var myApp={};myApp.key="mbVHEypGaMdeyTMrYYHn",myApp.secret="riOpCutFddLUkrxCftUkCWNKekDbpVpL",myApp.artistBoxes=[].slice.call(document.getElementsByClassName("artistBox")),myApp.init=function(){$(".search").on("submit",function(e){e.preventDefault();var s=$(".artistSearch").val();myApp.getArtists(s)})},myApp.searchURL="https://api.discogs.com/database/search",myApp.artistURL="https://api.discogs.com/artists/",myApp.releaseURL="https://api.discogs.com/releases/",myApp.getArtists=function(e){$.ajax({url:myApp.searchURL,type:"GET",dataType:"json",data:{key:myApp.key,secret:myApp.secret,q:e},success:function(e){myApp.getArtistInfo(e.results[0].id),myApp.getReleases(e.results[0].id)}})},myApp.getArtistInfo=function(e){$.ajax({url:myApp.artistURL+e,type:"GET",dataType:"json",success:function(e){myApp.displayArtists(e),console.log(e)}})},myApp.sortReleases=function(e,s){return e.year-s.year},myApp.getReleases=function(e){$.ajax({url:myApp.artistURL+e+"/releases",type:"GET",dataType:"json",success:function(e){console.log(e),e.releases?(e.releases.sort(myApp.sortReleases),e.releases.forEach(myApp.getReleaseInfo)):console.log("hey we got an error here...",e)}})},myApp.getReleaseInfo=function(e){e.main_release?$.ajax({url:myApp.releaseURL+e.main_release,type:"GET",dataType:"json",success:function(e){console.log(e),myApp.displayAlbums(e)}}):(console.log("not a main release"),console.log(e))},myApp.displayArtists=function(e){$(".artistBox").empty.append();var s=$("<div>").addClass("artistInfo"),t=$("<h2>").text(e.name);s.append(t),$(".artistBox").append(s),$(".albumWrapper").html("")},myApp.displayAlbums=function(e){var s=e.community.rating.average,t=$("<div>").addClass("albumInfoBox"),a=$("<h3>").text(e.title),p=$("<p>").addClass("rating").text("Rating: "+s+"/5"),o=$("<p>").text(" Users who voted: "+e.community.rating.count),n=$("<p>").text(e.year);t.append(a,p,o,n),$(".albumWrapper").append(t),console.log(s),$(".contentWrapper").css("padding-bottom","1%"),$("footer").css("display","block")},$(function(){myApp.init()});